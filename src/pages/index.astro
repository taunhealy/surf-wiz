---
import Layout from '../layouts/Layout.astro';
import { beachData } from '../types/beaches';
import type { WindData } from '../types/wind';
import BeachContainer from '../components/BeachContainer';

// Get wind data
let windData: WindData | null = null;
try {
  const response = await fetch('/api/surf-conditions');
  if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
  windData = await response.json();
} catch (error) {
  console.error('Failed to fetch wind data:', error);
}
---

<Layout>
  <main>
    <h1>Cape Town Surf Spots</h1>
    <BeachContainer
      client:load
      initialBeaches={beachData}
      windData={windData}
    />
  </main>
</Layout>